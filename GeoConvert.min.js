var GeoConvert={};GeoConvert.emptyGeojson=function(){var e={};return e.type="FeatureCollection",e.features=[],e},function(e,t,r){function a(e,t){this.fromProjection=e,this.toProjection=t}function n(e){if(e.dxf!==r){var t=GeoConvert.emptyGeojson(),n=e.prj,i=n&&!/GCS_WGS_1984|WGS84/g.test(n)?new a(n,proj4.WGS84):i,s=o(e.dxf),t=d(s,i);return t}throw new Error("need dxf file")}function o(e){var t=e.split(/\r\n|\r|\n/g),r={},a=t.indexOf("HEADER"),n=t.indexOf("ENDSEC",a)+1,o=t.slice(a,n);r.header=s(o);var i=t.indexOf("TABLES"),c=t.indexOf("ENDSEC",i)+1,p=t.slice(i,c);r.tables=l(p);var u=t.indexOf("BLOCKS"),v=t.indexOf("ENDSEC",u)+1,m=t.slice(u,v);r.blocks=f(m);var h=t.indexOf("ENTITIES"),g=t.indexOf("ENDSEC",h)+1,d=t.slice(h,g);return r.entities=y(d),r}function i(e,t,a,n,o){var i={};return i.x=v(a,e[t]),i.y=v(n,e[t+2]),o!==r&&(i.z=v(o,e[t+4])),i}function s(e){for(var t=e.length,r=0,a={};r<t;){var n=e[r].trim();if("9"===n){var o=e[r+1],s=e[r+2].trim();if("10"===s){var c={},l=r+3;"30"===e[r+6].trim()?(c=i(e,l,10,20,30),r+=8):(c=i(e,l,10,20),r+=6),a[o]=c}else a[o]=v(parseInt(s),e[r+3]),r+=4}else r++}return a}function c(e,t){for(var r,a,n,o=e.length-2,s={};t<o;){switch(r=e[t].trim(),a=e[t+1].trim(),r){case"0":var l=t+2,p=e.indexOf(n,l)+1||o,f=e.slice(l,p-2);s[a]=s[a]||[],s[a].push(c(f,0)),t=p-4;break;case"2":n=a,s.name=a;break;case"3":s.description=a;break;case"5":s.handle=a;break;case"10":case"11":case"12":case"13":case"14":case"15":var l=t+1,u=parseInt(r);s[k[r]]=i(e,l,u,u+10);break;case"16":case"17":var l=t+1,u=parseInt(r);s[k[r]]=i(e,l,u,u+10,u+20);break;case"40":s.patternLength=parseFloat(a);break;case"49":s.elements.push(parseFloat(a));break;case"62":s.color=parseInt(a);break;case"73":s.elements=[];break;case"330":case"360":s.ownerHandle=a}t+=2}return s}function l(e){for(var t=e.length,r=0,a={};r<t;){var n=e.indexOf("TABLE",r),o=e.indexOf("ENDTAB",n)+1;if(0!==o){var i=e.slice(n,o);a[e[n+2]]=c(i,1),r=o}else r=t+1}return a}function p(e,t){for(var r,a,n=e.length-2,o={};t<n;){switch(r=e[t].trim(),a=e[t+1].trim(),r){case"0":var s=e.indexOf("  0",t+2)+1||n,c=e.slice(t,s-1);o.entities=o.entities||[],o.entities.push(u(c,0)),t=s-3;break;case"1":o.xrefName=a;break;case"2":o.name=a;break;case"3":o.blockName=a;break;case"5":o.handle=a;break;case"8":o.layerName=a;break;case"10":var l=t+1;o.basePoint=i(e,l,10,20,30);break;case"330":o.ownerHandle=a;break;case"360":table.ownerHandle=a}t+=2}return o}function f(e){for(var t=e.length,r=0,a={};r<t;){var n=e.indexOf("BLOCK",r),o=e.indexOf("ENDBLK",n)+1;if(0!==o){var i=e.slice(n,o),s=p(i,1);a[s.blockName]=s,r=o}else r=t+1}return a}function u(e,t){for(var a,n,o,s=e.length,c={},l=!1;t<s;){switch(a=e[t].trim(),n=e[t+1].trim(),a){case"0":o=n,c.entityType=n;break;case"1":case"5":case"6":case"7":case"8":c[k[a]]=n;break;case"10":var p=t+1;switch(o){case"HATCH":if(l){var f=c.multiVertices[c.multiVertices.length-1];if(c.verticesNumber>f.length){var u=i(e,p,10,20),y=f[f.length-1];(y===r||y.x!==u.x&&y.y!==u.y)&&f.push(u)}}break;case"LWPOLYLINE":c.vertices=c.vertices||[],c.vertices.push(i(e,p,10,20));break;case"POINT":case"MTEXT":case"XLINE":c.point=i(e,p,10,20,30);break;case"TEXT":case"LINE":c.startPoint=i(e,p,10,20,30)}break;case"11":var p=t+1;switch(o){case"HATCH":if(l){var f=c.multiVertices[c.multiVertices.length-1];f.push(i(e,p,11,21))}l=!1;break;case"TEXT":case"LINE":c.endPoint=i(e,p,10,20,30)}break;case"39":case"48":case"50":case"51":c[k[a]]=parseFloat(n);break;case"40":switch(o){case"TEXT":c.textHeight=parseFloat(n);break;case"ARC":case"CIRCLE":c.radius=parseFloat(n)}break;case"60":case"62":case"70":c[k[a]]=parseInt(n);break;case"72":"1"!==n&&"0"!==n||(l=!0);break;case"91":c.multiVertices=[];break;case"93":c.verticesNumber=parseInt(n),c.multiVertices.push([]);break;case"330":c.ownerHandle=n}t+=2}return c}function y(e){for(var t=e.length,r=0,a=[];r<t;){var n=e.indexOf("  0",r),o=e.indexOf("  0",n+1);if(o!==-1){var i=e.slice(n,o),s=u(i,0);a.push(s),r=o}else r=t+1}return a}function v(e,t){return e<=9?t:e>=10&&e<=59?parseFloat(t):e>=60&&e<=99?parseInt(t):e>=100&&e<=109?t:e>=110&&e<=149?parseFloat(t):e>=160&&e<=179?parseInt(t):e>=210&&e<=239?parseFloat(t):e>=270&&e<=289?parseInt(t):e>=290&&e<=299?!!parseInt(t):e>=300&&e<=369?t:e>=370&&e<=389?parseInt(t):e>=390&&e<=399?t:e>=400&&e<=409?parseInt(t):e>=410&&e<=419?t:e>=420&&e<=429?parseInt(t):e>=430&&e<=439?t:e>=440&&e<=459?parseInt(t):e>=460&&e<=469?parseFloat(t):e>=470&&e<=481?t:999===e?t:e>=1e3&&e<=1009?t:e>=1010&&e<=1059?parseFloat(t):e>=1060&&e<=1071?parseInt(t):t}function m(e,t){var e=t?t.trans([e.x,e.y]):[e.x,e.y];return e}function h(e,t){var a=[];if(e===r);return e.forEach(function(e){a.push(m(e,t))}),a}function g(e,t){var a={};switch(e.entityType){case"ARC":break;case"CIRCLE":break;case"INSERT":break;case"TEXT":a.type="Point",a.coordinates=m(e.startPoint,t);break;case"LINE":a.type="LineString",a.coordinates=h([e.startPoint,e.endPoint],t);break;case"LWPOLYLINE":a.type="LineString",a.coordinates=h(e.vertices,t),1===e.closed&&a.coordinates.push(a.coordinates[0]);break;case"HATCH":a.type="Polygon",a.coordinates=[],e.multiVertices.forEach(function(e){var r=h(e,t);r.push(r[0]),a.coordinates.push(r)})}if(a.type!==r){var n={};return n.type="Feature",n.geometry=a,n.properties={},n.style={},["text","textHeight","textStyleName","layerName","entityType"].forEach(function(t){e[t]!==r&&(n.properties[t]=e[t])}),n}}function d(e,t){var a=GeoConvert.emptyGeojson();for(var n in e.blocks){var o=e.blocks[n],i=o.entities;i!==r&&i.forEach(function(e){var n=g(e,t);n!==r&&a.features.push(n)})}return e.entities.forEach(function(e){var n=g(e,t);n!==r&&a.features.push(n)}),a}var k={1:"text",2:"name",5:"handle",6:"linetypeName",7:"textStyleName",8:"layerName",10:"lowerLeftCorner",11:"upperRightCorner",12:"centerDcs",13:"snapBasePoint",14:"snapSpacing",15:"gridSpacing",16:"viewDirectionFromTarget",17:"viewTarget",39:"thickness",48:"linetypeScale",50:"textRotation",51:"textOblique",60:"visibility",62:"colorNumber",70:"closed"};GeoConvert.dxf2Geojson=function(e,t){var r=n(e);if(t){var a=JSON.stringify(r);return a}return r},a.prototype.trans=function(e){return proj4(this.fromProjection,this.toProjection,e)}}(window,document),function(e,t,r){function a(e,t,r){if("gpx"===e)for(var s in t)a(s,t[s],r);else{var c;switch(e){case"wpt":c=n;break;case"trk":c=o;break;case"rte":c=i}c&&(t.forEach?t.forEach(function(e){r.features.push(c(e))}):r.features.push(c(t)))}}function n(e){var t={};t.type="Feature",t.properties={},t.properties.name=e.name,t.properties.cmt=e.cmt,t.properties.desc=e.desc,t.properties.time=e.time,t.geometry={},t.geometry.type="Point";var r=[e["@lon"],e["@lat"]];return t.geometry.coordinates=r,t}function o(e){var t={};t.type="Feature",t.properties={},t.properties.name=e.name,t.geometry={};var r;if(e.trkseg&&e.trkseg.trkpt){var a=e.trkseg.trkpt;a.forEach?(t.geometry.type="LineString",r=[],a.forEach(function(e){var t=[e["@lon"],e["@lat"]];r.push(t)})):(t.geometry.type="Point",r=[a["@lon"],a["@lat"]])}return t.geometry.coordinates=r,t}function i(e){var t={};t.type="Feature",t.properties={},t.properties.name=e.name,t.geometry={};var r;if(e.rtept){var a=e.rtept;a.forEach?(t.geometry.type="LineString",r=[],a.forEach(function(e){var t=[e["@lon"],e["@lat"]];r.push(t)})):(t.geometry.type="Point",r=[a["@lon"],a["@lat"]])}return t.geometry.coordinates=r,t}function s(){var e={};return e["@xmlns"]="http://www.topografix.com/GPX/1/1",e["@version"]="1.1",e["@creator"]="GeoConvert",e.metadata={},e.metadata.name="Geojson to GPX",e}function c(e,t,r,a){switch(e.type){case"Point":var n=l(e.coordinates);n.name=a.name?a.name:"",t.push(n);break;case"LineString":var o=p(e.coordinates);o.name=a.name?a.name:"",r.push(o);break;case"MultiPoint":case"MultiLineString":var i=e.type.replace("Multi","");e.coordinates.forEach(function(e){c({type:i,coordinates:e},t,r,a)});break;case"GeometryCollection":e.geometries.forEach(function(e){c(e,t,r,a)});break;case"Feature":c(e.geometry,t,r,e.properties);break;case"FeatureCollection":e.features.forEach(function(e){c(e,t,r)})}}function l(e){var t={};return t["@lon"]=e[0],t["@lat"]=e[1],t}function p(e){var t={};return t.rtept=[],t.rtept.sameName=!0,e.forEach(function(e){var r={};r["@lon"]=e[0],r["@lat"]=e[1],t.rtept.push(r)}),t}GeoConvert.gpx2Geojson=function(e,t){var r;if("string"==typeof e)r=GeoConvert.xml2Json(e);else{if("object"!=typeof e||!e.xmlVersion)throw new Error("Unsupported input type");r=GeoConvert.xml2Json(e)}var n=GeoConvert.emptyGeojson();if(a("gpx",r.gpx,n),t){var o=JSON.stringify(n);return o}return n},GeoConvert.geojson2Gpx=function(e,t){var r;r="string"==typeof e?JSON.parse(e):e;var a=s(),n=[],o=[];n.sameName=!0,o.sameName=!0,"Feature"!==r.type&&"FeatureCollection"!==r.type&&(r={type:"Feature",geometry:r,properties:{}}),c(r,n,o),a.wpt=n,a.rte=o;var i=GeoConvert.json2Xml(a,"gpx");if(t){var l="<?xml version='1.0' encoding='UTF-8'?>"+(new XMLSerializer).serializeToString(i);return l}return i}}(window,document),function(e,t,r){function a(e,t,r,i){switch(e){case"kml":case"Document":case"Folder":if(t.forEach)t.forEach(function(t){a(e,t,r,i)});else{var s=Object.keys(t),c=s.indexOf("Style");l>-1&&(s.splice(l,1),a("StyleMap",t.StyleMap,r,i));var l=s.indexOf("StyleMap");c>-1&&(s.splice(c,1),a("Style",t.Style,r,i)),s.forEach(function(e){a(e,t[e],r,i)})}break;case"Placemark":t.forEach?t.forEach(function(e){r.features.push(o(e,i))}):r.features.push(o(t,i));break;case"Style":case"StyleMap":t.forEach?t.forEach(function(e){e["@id"]&&(i[e["@id"]]=e)}):t["@id"]&&(i[t["@id"]]=t);break;case"GroundOverlay":t.forEach?t.forEach(function(e){r.features.push(n(e))}):r.features.push(n(t))}}function n(e){var t={};if(t.type="Feature",t.properties={},t.geometry=null,e.name&&(t.properties.name=e.name),e.description&&(t.properties.description=e.description),e.Icon&&e.Icon.href&&(t.properties.iconUrl=e.Icon.href),e.visibility&&(t.properties.opacity=parseFloat(e.visibility)),e.LatLonBox){latLonBox=e.LatLonBox;var r=[parseFloat(latLonBox.south),parseFloat(latLonBox.west)],a=[parseFloat(latLonBox.north),parseFloat(latLonBox.east)],n=[r,a];t.properties.latLngBounds=n}return t}function o(e,t){var r={};if(r.type="Feature",r.properties={},r.style={},e.name&&(r.properties.name=e.name),e.description&&(r.properties.description=e.description),e["gx:Track"]||e["gx:MultiTrack"]){var a={},n=[],o=e["gx:MultiTrack"],s=o?o["gx:Track"]:e["gx:Track"],c=s["gx:coord"];c&&c.forEach(function(e){if(""!==e.trim()){var t=e.split(" ");n.push([parseFloat(t[0]),parseFloat(t[1])])}}),s.when&&(r.properties.when=s.when),s.ExtendedData&&s.ExtendedData.SchemaData&&s.ExtendedData.SchemaData["gx:SimpleArrayData"]&&s.ExtendedData.SchemaData["gx:SimpleArrayData"].forEach(function(e){r.properties[e["@name"]]=e["gx:value"]}),a.type="LineString",a.coordinates=n,r.geometry=a}else r.geometry=i(e);var p=e.Style||{};if(e.styleUrl){var f=e.styleUrl.replace("#","");if(t[f]){var u,y;t[f].Pair?(t[f].Pair.forEach(function(e){e.key&&"normal"===e.key&&(y=e.styleUrl.replace("#",""))}),u=t[y]):u=t[f];var v=Object.keys(Object.assign({},p,u));v.forEach(function(e){var t=typeof p[e];"object"===t?p[e]=Object.assign({},p[e],u[e]):"undefined"===t&&(p[e]=u[e])})}}for(var m in p)switch(m){case"IconStyle":var h=p.IconStyle.Icon.href,g=p.IconStyle.scale,d=p.IconStyle.color;if(h&&(r.style.iconUrl=h),g&&(r.style.scale=parseFloat(g)),d&&(d=l(d),r.style.color=d.hex,r.style.opacity=d.opacity),p.IconStyle.hotSpot){var k=parseFloat(p.IconStyle.hotSpot["@x"]),S=parseFloat(p.IconStyle.hotSpot["@y"]);r.style.iconAnchor=[k,S]}break;case"LineStyle":var d=l(p.LineStyle.color),b=parseFloat(p.LineStyle.width);d&&(r.style.color=d.hex,r.style.opacity=d.opacity),b&&(r.style.weight=b);break;case"PolyStyle":var d=l(p.PolyStyle.color),x=parseInt(x),E=parseInt(p.PolyStyle.outline);d&&(r.style.fillColor=d.hex,r.style.fillOpacity=d.opacity),x&&(r.style.fill=x),E&&(r.style.stroke=E)}return r}function i(e){var t={};if(e.Point)if(e.Point.forEach){var r=[];e.Point.forEach(function(e){var t=[],a=e.coordinates.replace(/\t|\n/gi,"");if(""!==a.trim()){var n=a.split(",");t=[parseFloat(n[0]),parseFloat(n[1])]}r.push(t)}),t.type="MultiPoint",t.coordinates=r}else{var r=[],a=e.Point.coordinates.replace(/\t|\n/gi,"");if(""!==a.trim()){var n=a.split(",");r=[parseFloat(n[0]),parseFloat(n[1])]}t.type="Point",t.coordinates=r}else if(e.LineString)if(e.LineString.forEach){var r=[];e.LineString.forEach(function(e){var t=[],a=e.coordinates.trim();a.split(/\t|\n|\s/g).forEach(function(e){if(""!==e.trim()){var r=e.split(",");t.push([parseFloat(r[0]),parseFloat(r[1])])}}),r.push(t)}),t.type="MultiLineString",t.coordinates=r}else{var r=[],o=e.LineString.coordinates.trim();o.split(/\t|\n|\s/g).forEach(function(e){if(""!==e.trim()){var t=e.split(",");r.push([parseFloat(t[0]),parseFloat(t[1])])}}),t.type="LineString",t.coordinates=r}else if(e.Polygon)if(e.Polygon.forEach){var r=[];e.Polygon.forEach(function(e){var t=c(e);r.push(t)}),t.type="MultiPolygon",t.coordinates=r}else{var r=c(e.Polygon);t.type="Polygon",t.coordinates=r}else if(e.MultiGeometry){var s=e.MultiGeometry;if(Object.keys(s).length>1){var l=[];for(var p in s)if(s[p].forEach)s[p].forEach(function(e){var t={};t[p]=e,l.push(i(t))});else{var f={};f[p]=s[p],l.push(i(f))}t.type="GeometryCollection",t.geometries=l}else t=i(s)}return t}function s(e){var t=[],r=e.LinearRing.coordinates.trim();return r.split(/\t|\n|\s/g).forEach(function(e){if(""!==e.trim()){var r=e.split(",");t.push([parseFloat(r[0]),parseFloat(r[1])])}}),t}function c(e){var t=[];return["outerBoundaryIs","innerBoundaryIs"].forEach(function(r){var a=e[r];if(a){var n;a.forEach?a.forEach(function(e){n=s(e),t.push(n)}):(n=s(a),t.push(n))}}),t}function l(e){var t={};return"string"==typeof e&&8===e.length?(t.hex="#"+e.slice(6,8)+e.slice(4,6)+e.slice(2,4),t.opacity=Math.round(parseInt(e.slice(0,2),16)/255*100)/100):(t.hex="#000",t.opacity=1),t}function p(){var e={};return e["@xmlns"]="http://www.opengis.net/kml/2.2",e["@xmlns:gx"]="http://www.google.com/kml/ext/2.2",e["@xmlns:kml"]="http://www.opengis.net/kml/2.2",e["@xmlns:atom"]="http://www.w3.org/2005/Atom",e.Document={},e}function f(e,t,r){switch(e.type){case"Point":case"LineString":case"Polygon":var a=e.type;if(t[a]){var n=y(a,e.coordinates);t[a].push||(t[a]=[t[a]],t[a].sameName=!0),t[a].push(n)}else t[a]=y(a,e.coordinates);break;case"MultiPoint":case"MultiLineString":case"MultiPolygon":var a=e.type.replace("Multi","");t.MultiGeometry={},e.coordinates.forEach(function(e){f({type:a,coordinates:e},t.MultiGeometry)});break;case"GeometryCollection":t.MultiGeometry={},e.geometries.forEach(function(e){f(e,t.MultiGeometry)});break;case"Feature":var n={};f(e.geometry,n),e.properties.name&&(n.name=e.properties.name),e.properties.description&&(n.description=e.properties.description);var o=u(e,r);n.styleUrl=o,t.push(n);break;case"FeatureCollection":e.features.forEach(function(e){f(e,t,r)})}}function u(e,t){var r=Object.assign({},e.style),a=0;return t.forEach(function(e,t){var n=!1;for(var o in r)r[o]!==e[o]&&(n=!0);n||(a=t+1)}),0===a&&(t.push(r),a=t.length),"custom"+a}function y(e,t){var r={};switch(e){case"Point":r={},r.coordinates=t.join();break;case"LineString":r={},r.tessellate=1,r.coordinates=t.join(" ");break;case"Polygon":r={},r.tessellate=1,r.outerBoundaryIs={},r.outerBoundaryIs.LinearRing={},r.outerBoundaryIs.LinearRing.coordinates=t[0].join(" "),t.shift(),t.forEach(function(e){r.innerBoundaryIs={},r.innerBoundaryIs.LinearRing={},r.innerBoundaryIs.LinearRing.coordinates=e.join(" ")})}return r}function v(e){var t={};t.stroke="outline",t.fill="fill";var r=e.map(function(e,t){var r={};r["@id"]="custom"+(t+1);for(var a in e){switch(a){case"iconUrl":case"iconAnchor":case"scale":r.IconStyle||(r.IconStyle={});break;case"color":case"weight":r.LineStyle||(r.LineStyle={});break;case"stroke":case"fill":case"fillColor":r.PolyStyle||(r.PolyStyle={})}switch(a){case"iconUrl":r.IconStyle.Icon={},r.IconStyle.Icon.href=e.iconUrl;break;case"iconAnchor":r.IconStyle.hotSpot={},r.IconStyle.hotSpot["@x"]=e.iconAnchor[0],r.IconStyle.hotSpot["@y"]=e.iconAnchor[1],r.IconStyle.hotSpot["@xunits"]="pixels",r.IconStyle.hotSpot["@yunits"]="pixels";break;case"scale":r.IconStyle.scale=e.scale;break;case"color":r.LineStyle.color=m(e.color,e.opacity);break;case"weight":r.LineStyle.width=e.weight;break;case"stroke":r.PolyStyle.outline=e.stroke;case"fill":r.PolyStyle.fill=e.fill;break;case"fillColor":r.PolyStyle.color=m(e.fillColor,e.fillOpacity)}}return r});return r.sameName=!0,r}function m(e,t){e=e.replace("#",""),t=t?t:1;var r=parseInt(255*t).toString(16),a=r+e.slice(4,6)+e.slice(2,4)+e.slice(0,2);return a}GeoConvert.kml2Geojson=function(e,t){var r;if("string"==typeof e)if(e.indexOf("kml:")!==-1){var n=e.replace(/\kml:/gi,"");r=GeoConvert.xml2Json(n)}else r=GeoConvert.xml2Json(e);else{if("object"!=typeof e||!e.xmlVersion)throw new Error("Unsupported input type");r=GeoConvert.xml2Json(e)}var o=GeoConvert.emptyGeojson(),i={};if(a("kml",r.kml,o,i),t){var s=JSON.stringify(o);return s}return o},GeoConvert.geojson2Kml=function(e,t){var r;r="string"==typeof e?JSON.parse(e):e;var a=p(),n=[],o=[];n.sameName=!0,"Feature"!==r.type&&"FeatureCollection"!==r.type&&(r={type:"Feature",geometry:r,properties:{}}),f(r,n,o),a.Document.Style=v(o),a.Document.Placemark=n;var i=GeoConvert.json2Xml(a,"kml");if(t){var s="<?xml version='1.0' encoding='UTF-8'?>"+(new XMLSerializer).serializeToString(i);return s}return i}}(window,document),function(e,t,r){GeoConvert.kmz2Geojsons=function(e,t){function r(){if(a--,0===a){var e=[];o.forEach(function(t){var r=GeoConvert.kml2Geojson(t);r.features.forEach(function(e){e.style&&e.style.iconUrl&&i[e.style.iconUrl]&&(e.style.iconUrl=i[e.style.iconUrl])}),e.push(r)}),t&&t(e)}}if(JSZip){var a=0,n=new JSZip,o=[],i={};n.loadAsync(e).then(function(e){Object.keys(n.files).forEach(function(t){a++;var s=n.file(t).name.split(".").pop();"kml"===s?e.file(t).async("string").then(function(e){o.push(e),r()},function(e){a--}):"png"===s||"jpg"===s?e.file(t).async("base64").then(function(e){var a="data:image/"+s+";base64,";i[t]=a+e,r()},function(e){a--}):a--})})}}}(window,document),function(e,t,r){function a(e){var t={};if(e.attributes)for(var r=0,n=e.attributes.length;r<n;r++){var o=e.attributes[r],i=o.nodeValue,s=!isNaN(parseFloat(i))&&isFinite(i)?parseFloat(i):i;t["@"+o.nodeName]=s}if(e.children.length>0)for(var c={},r=0,n=e.children.length;r<n;r++){var l=e.children[r];"_"!==l.tagName[0]?t[l.tagName]?(c[l.tagName]||(t[l.tagName]=[t[l.tagName]],c[l.tagName]=!0),t[l.tagName].push(a(l))):(t[l.tagName]=a(l),c[l.tagName]=!1):c[l.tagName]?t.push(a(l)):(t=[a(l)],c[l.tagName]=!0)}else{var p=e.textContent,s=!isNaN(parseFloat(p))&&isFinite(p)?parseFloat(p):p;Object.keys(t).length>0?t["#"]=s:t=s}return t}function n(e,t,r){var a=r.createElement(e);if(t.forEach)t.forEach(function(e){var t=n("_array",e,r);a.appendChild(t)});else if("object"==typeof t)for(var o in t)if("@"===o[0]){var e=o.replace("@","");a.setAttribute(e,t[o])}else if("#"===o)a.textContent=t[o];else if("object"!=typeof t[o]){var i=r.createElement(o);i.textContent=t[o],a.appendChild(i)}else if(t[o].forEach&&t[o].sameName)t[o].forEach(function(e){var t=n(o,e,r);a.appendChild(t)});else{var i=n(o,t[o],r);a.appendChild(i)}else a.textContent=t;return a}GeoConvert.xml2Json=function(t,r){var n;n=e.DOMParser?function(t){return(new e.DOMParser).parseFromString(t,"text/xml")}:"undefined"!=typeof e.ActiveXObject&&new e.ActiveXObject("Microsoft.XMLDOM")?function(t){var r=new e.ActiveXObject("Microsoft.XMLDOM");return r.async="false",r.loadXML(t),r}:function(){return null};var o;if("string"==typeof t)o=n(t);else{if("object"!=typeof t||!t.xmlVersion)throw new Error("Unsupported input type");o=t}var i=a(o);if(r){var s=JSON.stringify(i);return s}return i},GeoConvert.json2Xml=function(e,r,a){var o;o="string"==typeof e?JSON.parse(e):e;var i,s=r.trim()?r:"root",c=t.implementation.createDocument(null,"create");if(i=n(s,o,c),a){var l="<?xml version='1.0' encoding='UTF-8'?>"+(new XMLSerializer).serializeToString(i);return l}return i}}(window,document),"undefined"!=typeof module&&(module.exports=GeoConvert);